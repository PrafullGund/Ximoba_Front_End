<div class="container-fluid">
  <div class="container login-section">
    <mat-tab-group>
      <mat-tab>
        <ng-template mat-tab-label>
          <div class="tab-label">
            <img src="../../assets/student-icon-login.png" alt="Student Icon" class="tab-icon" />
            <span>Student</span>
          </div>
        </ng-template>
        <form (ngSubmit)="onSubmit(StudentsignUpForm)" #StudentsignUpForm="ngForm" style="background-color: white;">
          <div class="row desktop">
            <div class="col-sm-12 mb-3"></div>
            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="f_Name" class="form-label label-medium">
                First Name <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="f_Name" name="f_Name"
                [(ngModel)]="userData.f_Name" required placeholder="">
              <div *ngIf="FirstName.invalid && (FirstName.dirty || FirstName.touched)" class="text-danger">
                First Name is required.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="l_Name" class="form-label label-medium">
                Last Name <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="l_Name" name="l_Name"
                [(ngModel)]="userData.l_Name" required placeholder="">
              <div *ngIf="LastName.invalid && (LastName.dirty || LastName.touched)" class="text-danger">
                Last Name is required.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="middle_Name" class="form-label label-medium">
                Middle Name
                <span class="text-muted">(optional)</span> <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="middle_Name" name="middle_Name"
                [(ngModel)]="userData.middle_Name" placeholder="">
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">

              <label for="email_id" class="form-label label-medium">
                Your Email <sup>*</sup>
              </label>

              <input type="email" class="form-control rounded-pill" id="email_id" name="email_id"
                [(ngModel)]="userData.email_id" required email placeholder="">

              <div *ngIf="email.invalid && (email.dirty || email.touched)" class="text-danger">
                <div *ngIf="email.errors?.['required']">Email is required</div>
                <div *ngIf="email.errors?.['email']">
                  Please enter a valid email address
                </div>
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="mobile_number" class="form-label label-medium">
                Mobile Number <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="mobile_number" name="mobile_number"
                [(ngModel)]="userData.mobile_number" maxlength="10" pattern="^\d{10}$"
                (keypress)="allowOnlyNumbers($event)" (input)="limitToTenDigits()" required placeholder="">

              <div *ngIf="mobile.invalid && (mobile.dirty || mobile.touched)" class="text-danger">
                <div *ngIf="mobile.errors?.['required']">
                  Mobile Number is required.
                </div>
                <div *ngIf="mobile.errors?.['pattern']">
                  Mobile Number must be exactly 10 digits.
                </div>
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="password" class="form-label label-medium">
                Password <sup>*</sup>
              </label>

              <div class="d-flex align-items-center inputbtn">
                <input [type]="show ? 'text' : 'password'" class="form-control rounded-pill" id="password"
                  name="password" [(ngModel)]="userData.password" minlength="8"
                  pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required placeholder=""
                  #password="ngModel">

                <button type="button" (click)="togglePassword()">
                  <i class="fa fa-eye" aria-hidden="true" *ngIf="!show"></i>
                  <i class="fa fa-eye-slash" aria-hidden="true" *ngIf="show"></i>
                </button>
              </div>

              <div *ngIf="password.invalid && (password.dirty || password.touched)" class="text-danger">
                <div *ngIf="password.errors?.['required']">
                  Password is required.
                </div>
                <div *ngIf="password.errors?.['pattern']">
                  Your password must be at least 8 characters and include letters, numbers, and special characters.
                </div>
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <div class="form-check pt-3">
                <input class="form-check-input border-dark" type="checkbox" [(ngModel)]="rememberMe" name="rememberMe"
                  id="flexCheckDefault" required #rememberMeField="ngModel" />
                <label class="form-check-label" for="flexCheckDefault">
                  <span>I accept the</span>
                  <a class="terms-link" (click)="openTermsDialog()">
                    Terms & Conditions
                  </a>
                </label>
              </div>
              <div *ngIf="rememberMeField.invalid && rememberMeField.touched" class="error-text">
                Please accept the terms and conditions to continue.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <div class="form-check pt-3">
                <label (click)="openModal()" class="form-check-label" for="flexCheckDefault">
                  Already Have an Account ?
                  <a class="text-primary"> Login </a>
                </label>
              </div>
            </div>

            <div class="pt-5 mb-3 text-center">
              <button type="submit" class="btn sign-in-btn rounded-pill px-5"
                [disabled]="!StudentsignUpForm.form.valid">
                Sign up
              </button>
            </div>
          </div>
        </form>
      </mat-tab>

      <mat-tab label="Expert">
        <form (ngSubmit)="onInstituteRegister(signUpForm)" #signUpForm="ngForm" style="background-color: white;">
          <div class="row desktop">
            <ng-template mat-tab-label>
              <div class="tab-label">
                <img src="../../assets/expert-icon-login.png" alt="Student Icon" class="tab-icon" />
                <span>
                  Expert
                </span>
              </div>
            </ng-template>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="f_Name" class="form-label label-medium">
                First Name <sup>*</sup>
              </label>

              <input type="text" class="form-control rounded-pill" id="f_Name" name="f_Name"
                [(ngModel)]="instituteData.f_Name" required #FirstName="ngModel" placeholder="">

              <div *ngIf="FirstName.invalid && (FirstName.dirty || FirstName.touched)" class="text-danger">
                First Name is required.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="l_Name" class="form-label label-medium">
                Last Name <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="l_Name" name="l_Name"
                [(ngModel)]="instituteData.l_Name" required #LastName="ngModel" placeholder="">

              <div *ngIf="LastName.invalid && (LastName.dirty || LastName.touched)" class="text-danger">
                Last Name is required.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="middle_Name" class="form-label label-medium">
                Middle Name
                <span class="text-muted">(optional)</span> <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="middle_Name" name="middle_Name"
                [(ngModel)]="instituteData.middle_Name" #MiddleName="ngModel" placeholder="">
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="role" class="form-label label-medium">
                Select Role<sup>*</sup>
              </label>

              <select class="form-control rounded-input role-select" id="role" [(ngModel)]="instituteData.role"
                name="role" required #Role="ngModel">
                <option value="" disabled>Select your role</option>
                <option value="INSTITUTE">INSTITUTE</option>
                <!-- <option value="TRAINER">TRAINER</option> -->
                <option value="SELF_EXPERT">SELF EXPERT</option>
              </select>
              <div *ngIf="Role.invalid && (Role.dirty || Role.touched)" class="text-danger">
                Role selection is required.
              </div>
            </div>

            <div *ngIf="instituteData.role === 'TRAINER'" class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <div class="mt-3">
                <label for="roleSelect">Select Institute<sup>*</sup></label>
                <select class="form-select" aria-label="Default select example" id="instituteid"
                  [(ngModel)]="instituteData.instituteid" name="instituteid" required>
                  <option value="" disabled>Select Institute</option>
                  <option *ngFor="let institute of Institutedata" value="{{ institute._id }}">
                    {{ institute.institute_name }}
                  </option>
                </select>
              </div>
            </div>

            <div *ngIf="instituteData.role !== 'TRAINER'" class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="institute_name" class="form-label label-medium">
                Institute Name <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="institute_name" name="institute_name"
                [(ngModel)]="instituteData.institute_name" required #InstituteName="ngModel" placeholder="">

              <div *ngIf=" InstituteName.invalid && (InstituteName.dirty || InstituteName.touched)" class="text-danger">
                Institute Name is required.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="email_id" class="form-label label-medium">
                Your Email <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="email_id" name="email"
                [(ngModel)]="instituteData.email" required email #email="ngModel" placeholder="">
              <div *ngIf="email.invalid && (email.dirty || email.touched)" class="text-danger">
                <div *ngIf="email.errors?.['required']">Email is required.</div>
                <div *ngIf="email.errors?.['email']">
                  Please enter a valid email address
                </div>
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="password" class="form-label label-medium">
                Password <sup>*</sup>
              </label>
              <div class="d-flex align-items-center inputbtn">
                <input [type]="show ? 'text' : 'password'" class="form-control rounded-pill" id="password"
                  name="password" [(ngModel)]="instituteData.password" minlength="8"
                  pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" required placeholder=""
                  #password1="ngModel">
                <button type="button" (click)="togglePassword()">
                  <i class="fa fa-eye" aria-hidden="true" *ngIf="!show"></i>
                  <i class="fa fa-eye-slash" aria-hidden="true" *ngIf="show"></i>
                </button>
              </div>
              <div *ngIf="password1.invalid && (password1.dirty || password1.touched)" class="text-danger">
                <div *ngIf="password1.errors?.['required']">
                  Password is required.
                </div>
                <div *ngIf="password1.errors?.['pattern']">
                  Your password must be at least 8 characters and include letters, numbers, and special characters
                </div>
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="mobile_number" class="form-label label-medium">
                Mobile Number <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="mobile_number" name="phone_no"
                [(ngModel)]="instituteData.phone_no" maxlength="10" pattern="^\d{10}$" #mobile="ngModel"
                (keypress)="allowOnlyNumbers($event)" required placeholder="">
              <div *ngIf="mobile.invalid && (mobile.dirty || mobile.touched)" class="text-danger">
                <div *ngIf="mobile.errors?.['required']">
                  Mobile Number is required.
                </div>
                <div *ngIf="mobile.errors?.['pattern']">
                  Mobile Number must be exactly 10 digits.
                </div>
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="whatsapp_no" class="form-label label-medium">
                WhatsApp Number <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="whatsapp_no" name="whatsapp_no"
                [(ngModel)]="instituteData.whatsapp_no" maxlength="10" pattern="^\d{10}$" #whatsapp="ngModel"
                (keypress)="allowOnlyNumbers($event)" placeholder="">
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3 position-relative">
              <label for="address_1" class="form-label label-medium">
                Address Line 1 <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="address_1" name="address_1"
                [(ngModel)]="instituteData.address_1" #Address1="ngModel">

              <div *ngIf="Address1.invalid && (Address1.dirty || Address1.touched)" class="text-danger">
                Address Line 1 is required.
              </div>

              <!-- suggestion list1 -->
              <div *ngIf="locationSuggestions['address_1'].length" class="suggestion-list">
                <ul class="list-group">
                  <li *ngFor="let item of locationSuggestions['address_1']" (click)="selectLocation(item, 'address_1')"
                    class="list-group-item list-group-item-action">
                    {{ item.location }}
                  </li>
                </ul>
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="address_2" class="form-label label-medium">
                Address Line 2 <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="address_2" name="address_2"
                [(ngModel)]="instituteData.address_2" #Address2="ngModel">

              <!-- suggestion list2 -->
              <div *ngIf="locationSuggestions['address_2'].length" class="suggestion-list">
                <ul class="list-group">
                  <li *ngFor="let item of locationSuggestions['address_2']" (click)="selectLocation(item, 'address_2')"
                    class="list-group-item list-group-item-action">
                    {{ item.pincode }} {{ item.location }}
                  </li>
                </ul>
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="city" class="form-label label-medium">
                City <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="city" name="city"
                [(ngModel)]="instituteData.city" #City="ngModel">
              <div *ngIf="City.invalid && (City.dirty || City.touched)" class="text-danger">
                City is required.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="state" class="form-label label-medium">
                State <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="state" name="state"
                [(ngModel)]="instituteData.state" #State="ngModel">
              <div *ngIf="State.invalid && (State.dirty || State.touched)" class="text-danger">
                State is required.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="country" class="form-label label-medium">
                Country <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="country" name="country"
                [(ngModel)]="instituteData.country" #City="ngModel" required #Country="ngModel">
              <div *ngIf="Country.invalid && (Country.dirty || Country.touched)" class="text-danger">
                Country is required.
              </div>
            </div>

            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <label for="pincode" class="form-label label-medium">
                Pincode <sup>*</sup>
              </label>
              <input type="text" class="form-control rounded-pill" id="pincode" name="country"
                [(ngModel)]="instituteData.pincode" maxlength="6" #Pincode="ngModel" required
                (keypress)="allowOnlyNumbers($event)">
              <div *ngIf="Pincode.invalid && (Pincode.dirty || Pincode.touched)" class="text-danger">
                <div *ngIf="Pincode.errors?.['required']">
                  Pincode is required.
                </div>
                <div *ngIf="Pincode.errors?.['pattern']">
                  Pincode must be exactly 6 digits.
                </div>
              </div>
            </div>

            <!-- This div is for adjestment -->
            <div class="col-sm-12 col-md-6 col-lg-6 mb-3"></div>
            <div class="col-sm-12 col-md-6 col-lg-6 mb-3">
              <div class="form-check pt-3">
                <input class="form-check-input border-dark" type="checkbox" [(ngModel)]="rememberMeInstitute"
                  name="rememberMeInstitute" id="flexCheckDefault" required #rememberMeField="ngModel" />
                <label class="form-check-label" for="flexCheckDefault">
                  <span>
                    I accept the
                  </span>
                  <span class="terms-link" (click)="openTermsDialog()">
                    Terms & Conditions
                  </span>
                </label>
              </div>
              <div *ngIf="rememberMeField.invalid && rememberMeField.touched" class="error-text">
                Please accept the terms and conditions to continue.
              </div>
            </div>

            <div class="pt-5 mb-3 text-center">
              <button type="submit" class="btn btn-primary rounded-pill px-5" [disabled]="!signUpForm.form.valid">
                Sign Up
              </button>
            </div>
          </div>
        </form>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>